<!-- <app-header></app-header> -->
<agm-map
  [latitude]="latCenter"
  [longitude]="lngCenter"
  [zoom]="zoom" 
  [zoomControl]="true"
  [disableDefaultUI]="false"
  [mapTypeControl]="true"
  [scaleControl]="true"
  [streetViewControl]="true"
  [fullscreenControl]="true"
  [rotateControl]="true"
  [minZoom]="5"
  
  (zoomChange)="zoomChange($event)"
  (mapReady)="onMapLoad($event)"
  (mapClick)="onChoseLocation($event)">

  <button id="myLocation" class="toggle-button controls button" (click)="myLocation()">
    <span class="material-icons">my_location</span>
  </button>
  
  <!-- <agm-marker 
    [latitude]="this.latCenter"
    [longitude]="this.lngCenter"
    [label]="'L'">
    *ngFor="ngOnInit"
    <agm-info-window>
      <h6 align="center">Your Location</h6>
      <p align="center">
        {{this.latCenter}}, {{this.lngCenter}} <br>
        accuracy: {{this.accuracy}}
      </p>
    </agm-info-window>
  </agm-marker> -->

  <agm-marker 
    *ngFor="let m of markers; let i = index"
    [latitude]="m.lat"
    [longitude]="m.lng"
    [label]="m.label"
    animation="DROP">
    <agm-info-window>
      <strong>Gateway</strong>
    </agm-info-window>
  </agm-marker>


  <agm-marker
    [latitude]="this.make_lat"
    [longitude]="this.make_long"
    [markerDraggable]="false"
    animation="DROP"
    label="s"
    *ngIf="onChoseLocation">
    <agm-info-window>
      <h6 align="center">ค่าเฉลี่ยความแรงของสัญญาณ</h6>
      <p align="center">
        lat: {{mean_latitude}}, lng: {{mean_longitude}} <br>
        rssi: {{mean_rssi}}, snr: {{mean_snr}} <br>
        GW1: {{distanceGW1}} เมตร, GW2: {{distanceGW2}} เมตร <br>
        จากเกตเวย์: {{fromgateway}} <br>
        <a class="right" routerLink="/home">Details</a>
      </p>
    </agm-info-window>
  </agm-marker>

</agm-map>
